{"componentChunkName":"component---src-templates-post-template-tsx","path":"/220115/220115/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>컴포넌트를 만들다보면, 반복되는 로직이 자주 발생합니다. 이러한 상황에 커스텀 Hooks 를 만들어서 반복되는 로직을 쉽게 재사용할 수 있습니다.</p>\n<p>사용자 정의 Hook은 이름이 <code class=\"language-text\">use</code>로 시작하는 자바스크립트 함수입니다. 사용자 Hook은 다른 Hook을 호출할 수 있습니다.</p>\n<h3>커스텀 훅 역시 <strong>훅의 규칙을 지켜야 합니다.</strong></h3>\n<ul>\n<li>반복문, 조건문, 중첩된 함수 내에서 Hook을 호출하면 안됩니다.</li>\n<li>React 함수의 최상위(at the top level)에서 호출해야합니다.</li>\n<li>React 함수 내에서 Hook을 호출 해야합니다.</li>\n<li>다른 Hook들은 사용자 Hook의 위로 놓여야 하며 사용자 정의 Hook은 조건부 함수가 아니어야 합니다.</li>\n</ul>\n<h3><strong>같은 Hook을 사용하는 두 개의 컴포넌트는 state를 공유하나요?</strong></h3>\n<p>사용자 정의 Hook은 상태 관련 로직(구독을 설정하고 현재 변숫값을 기억하는 것)을 재사용하는 메커니즘이지만 사용자 Hook을 사용할 때마다 그 안의 state와 effect는 완전히 독립적입니다.</p>\n<h3><strong>각각의 Hook에 대한 호출은 서로 독립된 state를 받습니다.</strong></h3>\n<p>useFriendStatus를 직접적으로 호출하기 때문에 React의 관점에서 이 컴포넌트는 useState와 useEffect를 호출한 것과 같으므로,완전히 독립적으로 작동합니다.</p>\n<h3><strong>useReducer를 통해 이해하는 커스텀 Hook</strong></h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"># <span class=\"token number\">2.</span> reducer함수와 initialState인 <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span> 변수로 호출됩니다<span class=\"token punctuation\">.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">reducer<span class=\"token punctuation\">,</span> initialState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t# <span class=\"token number\">3.</span> state는 <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span>로 초기화 됩니다<span class=\"token punctuation\">.</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">function</span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t#<span class=\"token number\">4.</span> action <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> decrement<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span>로 reducer를 실행합니다<span class=\"token punctuation\">.</span>\n\t\t<span class=\"token keyword\">const</span> nextState <span class=\"token operator\">=</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t# <span class=\"token number\">7.</span> 반환받은 <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span>로 state를 초기화 합니다<span class=\"token punctuation\">.</span>\n\t\t\t<span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>nextState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">case</span> <span class=\"token string\">'increment'</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\t\t# <span class=\"token number\">5</span><span class=\"token punctuation\">.</span>action <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> decrement<span class=\"token punctuation\">}</span>로 <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span>를 반환합니다<span class=\"token punctuation\">.</span>\n\t\t<span class=\"token keyword\">case</span> <span class=\"token string\">'decrement'</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">,</span> initialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\tCount: </span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\n\t\t\t# 1. dispatch를 호출합니다.\n\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'decrement'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">-</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'increment'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h4>참고</h4>\n<ul>\n<li><a href=\"https://ko.reactjs.org/docs/hooks-intro.html\" target=\"_blank\" rel=\"nofollow\">리액트: Hook의 개요</a></li>\n<li><a href=\"https://react.vlpt.us/basic/21-custom-hook.html\" target=\"_blank\" rel=\"nofollow\">벨로퍼트와 함께하는 모던 리액트</a></li>\n</ul>","frontmatter":{"title":"[리액트 공부하기] #3 커스텀 Hook 사용하기","summary":"#3 리액트 공식문서를 참고하며 개인적으로 공부한 내용을 정리한 내용입니다.","date":"2022.01.15.","categories":["프론트엔드","리액트","TIL"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAlElEQVQoz2Ooq2/+T03MgEuitq4JL58kA2GaQXRNbSNRFuI0ENmwhsbW/80tHf+raxr+V1XXg2mQBchqiPYySPPiJcv+b9m6/f/UaTP/z5gx539f/6T//ROm/K9vaCHehcgGzpg55//KlWv+d3b1/Z84aer/vv7J/7u6+8n3ck0tJAwp9jIxMUqyl6mabGiSsMk1EADnbSgu+xka5AAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/79ad154ded65cc0bff2ec9548d002a2e/e018d/thumbnail.png","srcSet":"/static/79ad154ded65cc0bff2ec9548d002a2e/c6b60/thumbnail.png 480w,\n/static/79ad154ded65cc0bff2ec9548d002a2e/f5e84/thumbnail.png 960w,\n/static/79ad154ded65cc0bff2ec9548d002a2e/e018d/thumbnail.png 1920w","sizes":"(min-width: 1920px) 1920px, 100vw"},"sources":[{"srcSet":"/static/79ad154ded65cc0bff2ec9548d002a2e/0df1a/thumbnail.webp 480w,\n/static/79ad154ded65cc0bff2ec9548d002a2e/eeb31/thumbnail.webp 960w,\n/static/79ad154ded65cc0bff2ec9548d002a2e/702da/thumbnail.webp 1920w","type":"image/webp","sizes":"(min-width: 1920px) 1920px, 100vw"}]},"width":1920,"height":1080}},"publicURL":"/static/79ad154ded65cc0bff2ec9548d002a2e/thumbnail.png"}}}}]}},"pageContext":{"slug":"/220115/220115/"}},"staticQueryHashes":[]}